<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotify Mood Playlist</title>
</head>
<body>
    <canvas id="moodCanvas" width="600" height="600" style="border:1px solid black; align-self: center; background-image: 'IMG_0163.jpg' ;"></canvas>
    <script>
        var c = document.getElementById("moodCanvas");
        var ctx = c.getContext("2d");
        ctx.moveTo(300,0);
        ctx.lineTo(300,600);
        ctx.stroke();
        ctx.moveTo(0,300);
        ctx.lineTo(600,300);
        ctx.stroke();
        ctx.font = "15px Helvetica";
        ctx.fillText("Valence",530,330);
        ctx.fillText("Arousal",230,30);
       
        document.getElementById('moodCanvas').addEventListener('click', function(event) {
            let canvas = event.target;
            let rect = canvas.getBoundingClientRect();
            let x = event.clientX - rect.left;
            let y = event.clientY - rect.top;

        
            let valence = x / canvas.width; 
            let arousal = 1 - (y / canvas.height); 

            
            fetch('/generate_playlist', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ valence: valence, arousal: arousal })
            })
            
            .then(data => console.log('Generated Playlist:', data.playlist_url))
            .catch(error => console.error('Error:', error));
        });
    </script>
</body>
</html>